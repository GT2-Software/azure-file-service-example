## Contenerizacion

```pwsh
docker build -f .\Dockerfile.local -t meza360/azure-file-service:latest .
```

```pwsh
docker run -d -p 8080:8080 `
--mount type=volume,source=vazurefileservice,target=/mnt/volumes/vazurefileservice `
-e LOG_ROOT_PATH=/mnt/volumes/vazurefileservice/log `
-e CA_CERT_DATA=LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCVENDQWUyZ0F3SUJBZ0lJZStuN0had3NhNmd3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TkRFeE1UY3dOalUzTWpKYUZ3MHpOREV4TVRVd056QXlNakphTUJVeApFekFSQmdOVkJBTVRDbXQxWW1WeWJtVjBaWE13Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLCkFvSUJBUUM0T3lqMW12VElMM21LNDNJN0ZtNFVaVThHYmUrQVBwOEViQUZvb2tkSHRFeWtGb2RCMkhZT3dEa0oKcnZIQnhPQlkxaEYrUDR5VW1sbjZRam5tNlo0b2Z2SDNnYmVkVnVXb2hVejhRNW1Ub2ZBR2FyTG9rMTVSSG81NAoyM1NkNVdQS0ZpNU1NTktzTWJMZFQxUmQ3V05OQTZmTVRHeTA4NzY0ek1RY1dNUmdaNDl1ZU9QS2NtdG9CT0syCjF6aGhqMEdkREQ1NEgrMkNMdHhLVEtjTzIvMGQxMjFMbFYwSm5ndm05Zi9PRkV3S2RVMDdRUGkreWpRL2t2bEYKdGMvMHJaRk11K2xLaEhBWk1YK2dIVXYycE1QWGRaUlRQVjhpVFVzOEx4ZFBiZDYvYVlFaWtoZlR6V2ptaWRXUgplalN3aUpjUVlxckpLSXcyRWJLZnhXZ2NpU2ZUQWdNQkFBR2pXVEJYTUE0R0ExVWREd0VCL3dRRUF3SUNwREFQCkJnTlZIUk1CQWY4RUJUQURBUUgvTUIwR0ExVWREZ1FXQkJRYVdkdTlZUmNET3VsUmltWktaQmgyUUJPdm5EQVYKQmdOVkhSRUVEakFNZ2dwcmRXSmxjbTVsZEdWek1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQXk1cXB0bThBdQpCNVFXVnRDNkFpSERuaWR4bE13VlQxVmpvdGxHOWJwWnhDUE01emRHVTZ0eUZTTUovRVJySWpXVGpYd0VnREk4CkF4ZHpKM3NJWEtZRGNDajA5L3lyQi95M3ZpK1BDSDN1aUF6RVhrVi9tTGNqYWJIeUo2WGc5SFRXblFmK3BrcDgKeTR5d3pCSnFuNlRPK0srUnE2SUp1dW9NRzRkcFRkTTRXVTlYNmtOTmxDb3lIUFFWSWR6U2g0K1ZocDVIOUtCeQoyS1I0MFFEZkNlRzFPSmM1NTg1bTl3MFpLUkY5YkJaaWNXZ1ExZ25nQldYUXZ4R3hPT1N5Vk1KY0ZPK0lFWFRaCmQ1WTRVZ2tyYmovK0FOWkxNVVRkNEhRSTJQTjkrNUZUTTNMamUwaGZ4ekZvcmdxZkRabVgzTmVKQW82MENiZDgKc1FDdkZnMkNnWE5xCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K `
-e CLIENT_CERT_DATA=LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURLVENDQWhHZ0F3SUJBZ0lJZlpSWmYrOFpYdEl3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TkRFeE1UY3dOalUzTWpKYUZ3MHlOVEV4TVRjd056QXlNakphTUR3eApIekFkQmdOVkJBb1RGbXQxWW1WaFpHMDZZMngxYzNSbGNpMWhaRzFwYm5NeEdUQVhCZ05WQkFNVEVHdDFZbVZ5CmJtVjBaWE10WVdSdGFXNHdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFEWU5sWjYKOGdadzZvazI2QkhEUGEzd3drL3M3SE5sSlZXdFd5dHdQamc2S1JtN2NFZ3hyTHcxRDBSRldpOUhTL2NHczdzTgp6SU5UbnNzb25NZGsxakx5cUNSaEtnSnV2SU53UHZsWDN1MmRMUXltam5wT3VQRkRjK0NSS25rYkI2SndKbDk0ClI2NTlIWWxEaXBTbGpEbzRISCtGRDNwajYwQjBGZHpSRFVkM0tIQm9BNVdKeS9VWENqblpzcm1pdFJGUHRIUGQKdWFYQmg0L3kralVkNVRuREdMQTBLNkJnMzNTeGliZmo5Z2ZsM0pkK0ErT1gyaVlzcXNIZkZaN1JrVmEzT0VBcApVRkFEZi9MWDJVTEdxWkxJVXdWZ2pTRXIybTRldTI4ZlBiRUJGSzE0WVIya01xZmxWV0Z0WmJDcEhpUWx4d28wCjVHUWF5UWZmRzZyUXdkYkhBZ01CQUFHalZqQlVNQTRHQTFVZER3RUIvd1FFQXdJRm9EQVRCZ05WSFNVRUREQUsKQmdnckJnRUZCUWNEQWpBTUJnTlZIUk1CQWY4RUFqQUFNQjhHQTFVZEl3UVlNQmFBRkJwWjI3MWhGd002NlZHSwpaa3BrR0haQUU2K2NNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUUJGUXlSWjVMYjlpM0FlRm54cUdVMzIzQTkzCjNZM1BTVHRUWTh3RUlCQmZMSExkVzNTMFBJS3RVcUtYT0V1OXF0c1o1bE5JaEVQQkZnNFVHbk5Pa3JlR1FEWjEKUWU0ZXlPc1U2ZDd3enNsQVFIbHFOM2wrZ0Z3TE50LzhWOUhucCtpUDkzdVZzNjQxSlAweDZRSmdjSU1uSU9sSwpWcDEyZnpraGhRVDA2ZnNoc1QyRmVydTNIc2JOT3E5Vi9ESEdEajZjMWVLTVdaSEQ0L3pQWGo0ZGtGNHlUN0FSCng0YlJFejlZOEJiemY4ZDdxbktkcEllVjNjUldPc2VJanpseTFDWFhWNGo4OFFGWDV1dUpPVVRRTG5pRjBURG8KcmxSdTJJcExscWpFKzlGVGNESjliU3lFRmxUSUl4a0tIQjRVZnBwTjUwOXlNdWZZTHpEazBRV0pDSjhUCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K `
-e CLIENT_KEY_DATA=LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcFFJQkFBS0NBUUVBMkRaV2V2SUdjT3FKTnVnUnd6MnQ4TUpQN094elpTVlZyVnNyY0Q0NE9pa1p1M0JJCk1heThOUTlFUlZvdlIwdjNCck83RGN5RFU1N0xLSnpIWk5ZeThxZ2tZU29DYnJ5RGNENzVWOTd0blMwTXBvNTYKVHJqeFEzUGdrU3A1R3dlaWNDWmZlRWV1ZlIySlE0cVVwWXc2T0J4L2hROTZZK3RBZEJYYzBRMUhkeWh3YUFPVgppY3YxRndvNTJiSzVvclVSVDdSejNibWx3WWVQOHZvMUhlVTV3eGl3TkN1Z1lOOTBzWW0zNC9ZSDVkeVhmZ1BqCmw5b21MS3JCM3hXZTBaRld0emhBS1ZCUUEzL3kxOWxDeHFtU3lGTUZZSTBoSzlwdUhydHZIejJ4QVJTdGVHRWQKcERLbjVWVmhiV1d3cVI0a0pjY0tOT1JrR3NrSDN4dXEwTUhXeHdJREFRQUJBb0lCQUY5VHZkZGhKRVBldEhiWAo1UlQrK2RUZjUxdGZlUlZNVzdVZU1FM0JzUXE3bWxQUkVwT01SRUxrbzBZc21CSElSWGJZQVkzNDhLSUtyaW9PCnpiOEF6ZCs5RUtVaVg0WXhhWVl3emNEWFVrNXRVVm1TRWd6cGI3NDh0Zk5yRlpBOFVuczkvL1BKTHY2TTZqczAKTzR1dUF2RkFaMXprVVNNQzB4MGJrb3M5WHBnREZib3VxcmdLTXdwSjhPTDlpeXpKZDFUOVkzUkhncDRLcDE0MApLeXNQQ2QwbExMOEVXTUt2TXY0QUduRWJpL2c4ZFYxZy9TUVFPa3I5d0x5bk8rRHIwaDN6akMwVDVYUHFWSm9NCkVXVWVmdnduOEhpMGhUN3ZFaDMrcE5CSm9GWi9hYUJkZFRwdzFQQmR4eXpKSnoyREM4RUNDTElDUWo2a1RzSHYKK3FVVDc2a0NnWUVBOWZoc2hCVWc1cTdGZVRwMC9jeGtMc2JjUkVuNGozWHRLQVFScFV1dTdMWTFKL0ZzNXJzQgpUeWpIMEo2eUd0Q1dsT09FOHpXUkgra1J1d1d4L2VDMmZhNGhIdWVjZE1GQU5lRE5LYzFqakUzTDQxZ2FwTzQxCkc5Wk4zeVI2ZlU0dFBJcjMweVJDWGhwME9PcFpQRWVqWDZBSGw5d0JIK2ZSb3NUU0dYTU9ZRU1DZ1lFQTRRZEkKSTJoemtVY211LzB4cnVHa1RDNlg4d2g5VDhOWkZINkNqcVFLNWU1YnFWTERNVU1RclJnYklBcWJDSnlzQTlobApLNlZRYjlWNHd5UFlsdGtxc3htMnpETEYvTTJheEVEUTFOTFMxTDVaYVZqN1MvT2NrNVA4UFhxY3grazcxbEhCClRuaEQvL2FSckdSU0I0SGdkeVJFVHc4TlBjSk5UL3FrbXNaRU9TMENnWUVBa3dEbDJnckdueGZVN1o4Q1RLemIKTXhtbWl5bXFaQk1XcWRQRXVBV0RoZlZmejM5Nmxtc3RYU0lDU2F5T3hYZmtoeGR6WGVlbDFHeDNMRTg3RVlBNwprT0dBNmZlQ2lrVDFHejQvWDd4Z3dubThZU05HeVV1VWNnNmllN3BSZXBJK2R2Q1hMSmwvRUw2K3QwVllENjdBCjlXV3ZKQk5ZbUxqemtWUVFQU1dHY2dFQ2dZRUF0aThTRFhDc1dBczE1ZThJZ1dDM2h1SVdMVEpMV2Y5N0tHZUEKUmdHenZSSXNiYnJPd3h4YjdQZmVSaU92L3RueFBpKzlRUWZYUnFPYTRNb3R1WHRhNGFQSTVpdVpOYUkwVWYxegoxVXBXWE4wN1FGcEZJZW02YzVUVkcrVWY5NDN4M3dOVHNMY1h2cXllcGVhV3J2Tk1pc2oyOE5icnpudDM0bSszClFvT1Fpb1VDZ1lFQWpWekRLclhSQkZTNGt4YVNBdlBHeDNYNWJnd0FkZXZqWXlUYlVZZUxzTGZNYmhHNnJ5ZGEKYzFVV1U1dVZLZWp6dVNtSTNSUU96R0phTldUaWI3RnFZTlNpWlk1VjVKeGZUVkRzeTBBWkdObVpLUnNpRGdsTwo2Zlg4c3IyenBDbkpZTTZvdHJVRFJNdFEvZmptbTlWYmQrS2ZpWUgzaktPOHl4UjNwUkRHK2EwPQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo= `
-e MASTER_URL=https://gt2-control-plane-01.gt2software.dev:7002 `
meza360/azure-file-service:latest
```

```bash
docker run -d -p 8080:8080 \
--mount type=volume,source=vazurefileservice,target=/mnt/volumes/vazurefileservice \
-e LOG_ROOT_PATH=/mnt/volumes/vazurefileservice/log \
meza360/azure-file-service:latest
```


```bash
# Restart a deployment
kubectl rollout restart deployment/file-service
```
## Generar .war
Esto genera un .war sin variables de entorno
```bash
mvn clean package
```

## Servidor Middleware
Se utiliza Payara Micro para contenerizacion del aplicativo en la arquitectura cloud. Se utiliza un archivo de entrypoint personalizado [entrypoint.sh](./container/entrypoint.sh) 


Se necesitan establecer las variables para el funcionamiento del aplicativo transparente desde onPremise:


Kubectl command failed: The Service "api-service" is invalid: spec.ports[0].nodePort: Invalid value: 8102: provided port is not in the valid range. The range of valid ports is 30000-32767
